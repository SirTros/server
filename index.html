<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>SirTros-city</title>
    <style>
        body { margin:0; background:#111; color:white; font-family:sans-serif; display:flex; justify-content:center; align-items:center; height:100vh; }
        .card { background:#222; padding:30px; border-radius:15px; border:2px solid #00aaff; text-align:center; min-width:280px; }
        .stat { font-size:28px; font-weight:bold; margin:15px 0; }
        .online { color:#2ecc71; }
        .offline { color:#e74c3c; }
        button { background:#00aaff; border:none; color:white; padding:10px 20px; border-radius:5px; cursor:pointer; font-weight:bold; }
    </style>
</head>
<body>
    <div class="card">
        <div style="color:#888; margin-bottom:10px;">SirTros-city.aternos.me</div>
        <div id="st" class="offline">NAČÍTÁNÍ...</div>
        <div style="margin-bottom:20px;">Hráči: <span id="hr">0 / 20</span></div>
        <button onclick="navigator.clipboard.writeText('SirTros-city.aternos.me');alert('IP OK')">Kopírovat IP</button>
    </div>

    <script>
        async function check() {
            try {
                // Přidali jsme náhodné číslo nakonec, aby se obešla mezipaměť (cache)
                const r = await fetch('https://api.minetools.eu?' + Math.random());
                const d = await r.json();
                
                const s = document.getElementById('st');
                const h = document.getElementById('hr');

                if (d.error) {
                    s.innerText = "OFFLINE";
                    s.className = "stat offline";
                    h.innerText = "0 / 20";
                } else {
                    s.innerText = "ONLINE";
                    s.className = "stat online";
                    h.innerText = d.players.online + " / " + d.players.max;
                }
            } catch (e) {
                document.getElementById('st').innerText = "OFFLINE";
            }
        }
        check();
        setInterval(check, 30000);
    </script>
</body>
</html>
